---
import "/src/styles/global.css";
import Layout from "../layout/Layout.astro";
---

<Layout>
  <!-- Hero -->
  <section class="section flex-row gap-8 items-center justify-center">
    <div class="flex flex-col gap-4">
      <h1 class="font-main font-bold text-5xl">WHALLER</h1>
      <p>
        L’outil qui vous permet de détecter les fréquences parasites et de
        garder vos outils numériques intactes.
      </p>
      <a class="btn mt-6" href="/">Passer à l'action</a>
    </div>
    <img class="w-3/5" src="/hero_img.png" alt="L'appareil Whaller" />
  </section>
  <!-- Pres -->
  <section class="section items-center justify-center">
    <h2>Qu'est ce que Whaller</h2>
    <div class="flex gap-4">
      <img class="w-1/2 object-contain" src="/pres_img.png" alt="" />
      <div class="flex flex-col gap-2">
        <p>
          Flipper Zero est un appareil légal destiné à l’exploration de
          fréquence radio, mais il peut être détourné pour réaliser des actions
          non autorisées sur des systèmes mal protégés. Cette ambiguïté crée un
          vrai besoin : détecter l’utilisation potentielle de ce type d’outil
          dans un espace donné.
        </p>
        <p>
          Nous avons conçu Whaller, un dispositif compact capable d’identifier
          la présence de signaux radio suspects associés à l’usage d’appareils
          de type Flipper Zero. Whaller n’interfère pas avec les transmissions :
          il analyse, alerte et aide à évaluer un risque. L’objectif est simple
          : fournir un outil pédagogique et préventif pour comprendre,
          surveiller et sécuriser un environnement face aux explorations radios
          non souhaitées.
        </p>
        <div class="flex gap-2 *:w-1/3">
          <img src="/illu1.png" alt="" />
          <img src="/illu2.png" alt="" />
          <img src="/illu3.png" alt="" />
        </div>
        <p>
          Whaller offre une approche plus transparente et responsable de la
          cybersécurité : visualisation des détections, alertes locales,
          utilisation dans un cadre légal et éducatif, et design volontairement
          proche d’un outil de test classique afin de faciliter la compréhension
          et la démonstration
        </p>
      </div>
    </div>
  </section>
  <!-- <section class="section">
    <h2>Qu'est ce que Whaller</h2>
    <p>
      Flipper Zero est un appareil légal destiné à l’exploration de fréquence
      radio, mais il peut être détourné pour réaliser des actions non autorisées
      sur des systèmes mal protégés. Cette ambiguïté crée un vrai besoin :
      détecter l’utilisation potentielle de ce type d’outil dans un espace
      donné.
    </p>
    <img class="w-1/2 object-contain self-center" src="/pres_img.png" alt="" />
    <p>
      Nous avons conçu Whaller, un dispositif compact capable d’identifier la
      présence de signaux radio suspects associés à l’usage d’appareils de type
      Flipper Zero. Whaller n’interfère pas avec les transmissions : il analyse,
      alerte et aide à évaluer un risque. L’objectif est simple : fournir un
      outil pédagogique et préventif pour comprendre, surveiller et sécuriser un
      environnement face aux explorations radios non souhaitées.
    </p>
    <div class="flex gap-2 *:w-1/3 self-center">
      <img src="/illu1.png" alt="" />
      <img src="/illu2.png" alt="" />
      <img src="/illu3.png" alt="" />
    </div>
    <p>
      Whaller offre une approche plus transparente et responsable de la
      cybersécurité : visualisation des détections, alertes locales, utilisation
      dans un cadre légal et éducatif, et design volontairement proche d’un
      outil de test classique afin de faciliter la compréhension et la
      démonstration
    </p>
  </section> -->
  <!-- Fonctionnalités -->
  <section class="section">
    <h2>Analyse et Détection</h2>
    <div class="flex">
      <div class="flex flex-col gap-4 justify-center">
        <h3>Surveillance continue du spectre RF</h3>
        <p>
          Whaller analyse en temps réel des plages de fréquences, il balaie les
          bandes de fréquences couramment utilisées par les appareils
          d’exploration RF et enregistre le comportement normal du spectre.
          Cette surveillance continue crée une base de référence qui permet
          d’identifier et d’alerter plus facilement les variations suspectes
          lorsqu’elles apparaissent, une fonctionnalité clé également présente
          dans votre Whaller.
        </p>
        <p></p>
        <h3>Détection de signaux anormaux</h3>
        <p>
          Quand un signal s’écarte du comportement normal de l’environnement,
          Whaller le considère comme suspect. Cela peut correspondre à des
          impulsions répétitives, des émissions courtes mais régulières, des
          transmissions sur des bandes peu sollicitées ou tout autre
          comportement radio non attendu et peu naturel pour un spectre
          inoffensif. La détection repose sur l’analyse du spectre et non sur
          l’identification d’un appareil spécifique.
        </p>
      </div>
      <img class="w-1/2 object-contain" src="/hand_img.png" alt="" />
    </div>
  </section>
  <section class="section">
    <h2>Protection et Réaction</h2>
    <div class="flex">
      <div class="flex flex-col gap-4 justify-center">
        <h3>Possibilité de blocage et défense</h3>
        <p>
          Lorsqu’un spectre radio malveillant est détecté, Whaller permet
          d’activer un mode de défense destiné à bloquer les risques associés à
          cette émission. Cette fonction enclenche une protection interne,
          augmente le niveau de l’alerte sonore et applique des mesures de
          sécurité adaptées. Elle ne modifie pas le spectre radio, mais aide à
          contenir la menace en isolant les outils sensibles que l’utilisateur
          possède face à ces émissions radios malveillantes, les protégeant de
          l’anomalie détectée.
        </p>
        <p></p>
        <h3>Alertes locales en temps réel</h3>
        <p>
          Dès qu’une anomalie, donc une potentielle menace est confirmée,
          Whaller déclenche une alerte immédiate, réglée par défaut sur l’alerte
          sonore et vibrante. Celle-ci peut être décidée par l’utilisateur sous
          la forme d’un signal visuel sur l’écran, d’un indicateur lumineux,
          d’un avertissement sonore ou d’un message explicatif dans l’interface.
          L’objectif est de permettre une réaction rapide sans exiger de
          compétences techniques avancées, tout en ayant l’avertisseur adaptée à
          chaque personne utilisant Whaller.
        </p>
      </div>
      <img class="w-1/2 object-contain" src="/buy_img.png" alt="" />
    </div>
  </section>
  <!-- Buy -->
  <section class="section">
    <h2>INTÉRESSÉ ?</h2>
    <div class="flex gap-8 justify-center">
      <div class="flex flex-col gap-4">
        <div class="card">
          <h3>Whaller - Édition standard</h3>
          <p><span class="font-bold text-4xl">299</span>€</p>
          <p class="text-gray-400 text-sm">
            Paiement unique, pas d'abonnement requis.
          </p>
          <a class="btn w-full" href="/">Commander maintenant</a>
        </div>
        <div class="card">
          <p>Inclus dans votre Whaller</p>
          <p class="text-gray-400 text-sm">Surveillance RF continue 24/7</p>
          <p class="text-gray-400 text-sm">Mises à jour gratuites</p>
          <p class="text-gray-400 text-sm">Protection anti-menaces activable</p>
          <p class="text-gray-400 text-sm">Interface intuitive</p>
          <p class="text-gray-400 text-sm">Alertes visuelles et sonores</p>
          <p class="text-gray-400 text-sm">Détection de signaux anormaux</p>
        </div>
        <div class="flex gap-4">
          <div class="card items-center w-1/3">
            <p class="text-lg font-bold">30j</p>
            <p class="text-gray-400 text-sm text-center">
              Satisfait ou remboursé
            </p>
          </div>
          <div class="card items-center w-1/3">
            <p class="text-lg font-bold">2 ans</p>
            <p class="text-gray-400 text-sm text-center">Garantie</p>
          </div>
          <div class="card items-center w-1/3">
            <p class="text-lg font-bold">∞</p>
            <p class="text-gray-400 text-sm text-center">Mises à jour</p>
          </div>
        </div>
      </div>
      <img class="w-1/2 object-contain" src="/hero_img.png" alt="" />
    </div>
  </section>
  <img class="floor" src="/Floor1.png" alt="" />
  <img class="floor" src="/Floor2.png" alt="" />
  <img class="floor" src="/Floor3.png" alt="" />
  <script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";
    import { ScrollToPlugin } from "gsap/ScrollToPlugin";

    gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

    //smooth section scrolling
    let sections = gsap.utils.toArray(".section");
    console.log(sections);
    let current = 0;
    let animating = false;

    function goToSection(index) {
      if (animating || index < 0 || index >= sections.length) return;
      animating = true;

      gsap.to(window, {
        scrollTo: {
          y: sections[index].offsetTop - 76,
          autoKill: false,
        },
        ease: "power2.out",
        duration: 0.5,
        onComplete: () => (animating = false),
      });
    }
    //mouse scroll listener
    window.addEventListener("wheel", (e) => {
      if (animating || current < 0 || current >= sections.length) return;
      if (e.deltaY > 0 && current < sections.length - 1) current++;
      else if (e.deltaY < 0 && current && current > 0) current--;
      console.log(current);
      goToSection(current);
    });

    // Listen to scroll updates to recalc current section
    window.addEventListener("scroll", () => {
      let scrollY = window.scrollY - 76;
      let closestIndex = 0;
      let smallestDiff = Infinity;

      sections.forEach((section, i) => {
        const diff = Math.abs(section.offsetTop - scrollY);
        if (diff < smallestDiff) {
          smallestDiff = diff;
          closestIndex = i;
        }
      });

      current = closestIndex;
      console.log(current);
    });

    //parallaxe effect
    let floors = gsap.utils.toArray(".floor");
    let main = document.querySelector("main");

    gsap.fromTo(
      floors[0],
      {
        bottom: -100,
      },
      {
        bottom: 0,
        scrollTrigger: {
          trigger: main,
          scrub: true,
        },
      }
    );

    gsap.fromTo(
      floors[1],
      {
        bottom: -400,
      },
      {
        bottom: 0,
        scrollTrigger: {
          trigger: main,
          scrub: true,
        },
      }
    );

    gsap.fromTo(
      floors[2],
      {
        bottom: -800,
      },
      {
        bottom: 0,
        scrollTrigger: {
          trigger: main,
          scrub: true,
        },
      }
    );
  </script>
</Layout>
